<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#1cd01e"><meta name="robots" content="noindex,nofollow"><title>Spartabots Signin</title><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway"><link rel="stylesheet" href="https://www.spartabots.org/system/resources/signin-style.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js" integrity="sha256-1hjUhpc44NwiNg8OwMu2QzJXhD8kcj+sJA3aCQZoUjg=" crossorigin="anonymous"></script><script src="https://www.gstatic.com/firebasejs/3.6.3/firebase.js"></script><script src="https://cdn.jsdelivr.net/gh/mathusummut/confetti.js/confetti.min.js"></script><script>!function e(t,o,n){function s(i,c){if(!o[i]){if(!t[i]){var r="function"==typeof require&&require;if(!c&&r)return r(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[i]={exports:{}};t[i][0].call(u.exports,(function(e){return s(t[i][1][e]||e)}),u,u.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,o){var n;(n=jQuery).fn.autoComplete=function(e){var t=n.extend({},n.fn.autoComplete.defaults,e);return"string"==typeof e?(this.each((function(){var t=n(this);"destroy"==e&&(n(window).off("resize.autocomplete",t.updateSC),t.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),t.data("autocomplete")?t.attr("autocomplete",t.data("autocomplete")):t.removeAttr("autocomplete"),n(t.data("sc")).remove(),t.removeData("sc").removeData("autocomplete"))})),this):this.each((function(){function e(e){var n=o.val();if(o.cache[n]=e,e.length&&n.length>=t.minChars){for(var s="",a=0;a<e.length;a++)s+=t.renderItem(e[a],n);o.sc.html(s),o.updateSC(0)}else o.sc.hide()}var o=n(this);o.sc=n('<div class="autocomplete-suggestions '+t.menuClass+'"></div>'),o.data("sc",o.sc).data("autocomplete",o.attr("autocomplete")),o.attr("autocomplete","off"),o.cache={},o.last_val="",o.updateSC=function(e,t){if(o.sc.css({top:o.offset().top+o.outerHeight(),left:o.offset().left,width:o.outerWidth()}),!e&&(o.sc.show(),o.sc.maxHeight||(o.sc.maxHeight=parseInt(o.sc.css("max-height"))),o.sc.suggestionHeight||(o.sc.suggestionHeight=n(".autocomplete-suggestion",o.sc).first().outerHeight()),o.sc.suggestionHeight))if(t){var s=o.sc.scrollTop(),a=t.offset().top-o.sc.offset().top;a+o.sc.suggestionHeight-o.sc.maxHeight>0?o.sc.scrollTop(a+o.sc.suggestionHeight+s-o.sc.maxHeight):0>a&&o.sc.scrollTop(a+s)}else o.sc.scrollTop(0)},n(window).on("resize.autocomplete",o.updateSC),o.sc.appendTo("body"),o.sc.on("mouseleave",".autocomplete-suggestion",(function(){n(".autocomplete-suggestion.selected").removeClass("selected")})),o.sc.on("mouseenter",".autocomplete-suggestion",(function(){n(".autocomplete-suggestion.selected").removeClass("selected"),n(this).addClass("selected")})),o.sc.on("mousedown click",".autocomplete-suggestion",(function(e){var s=n(this),a=s.data("val");return(a||s.hasClass("autocomplete-suggestion"))&&(o.val(a),t.onSelect(e,a,s),o.sc.hide()),!1})),o.on("blur.autocomplete",(function(){try{over_sb=n(".autocomplete-suggestions:hover").length}catch(e){over_sb=0}over_sb?o.is(":focus")||setTimeout((function(){o.focus()}),20):(o.last_val=o.val(),o.sc.hide(),setTimeout((function(){o.sc.hide()}),350))})),t.minChars||o.on("focus.autocomplete",(function(){o.last_val="\n",o.trigger("keyup.autocomplete")})),o.on("keydown.autocomplete",(function(e){var s;if((40==e.which||38==e.which)&&o.sc.html())return(a=n(".autocomplete-suggestion.selected",o.sc)).length?(s=40==e.which?a.next(".autocomplete-suggestion"):a.prev(".autocomplete-suggestion")).length?(a.removeClass("selected"),o.val(s.addClass("selected").data("val"))):(a.removeClass("selected"),o.val(o.last_val),s=0):(s=40==e.which?n(".autocomplete-suggestion",o.sc).first():n(".autocomplete-suggestion",o.sc).last(),o.val(s.addClass("selected").data("val"))),o.updateSC(0,s),!1;if(27==e.which)o.val(o.last_val).sc.hide();else if(13==e.which||9==e.which){var a;(a=n(".autocomplete-suggestion.selected",o.sc)).length&&o.sc.is(":visible")&&(t.onSelect(e,a.data("val"),a),setTimeout((function(){o.sc.hide()}),20))}})),o.on("keyup.autocomplete",(function(s){if(!~n.inArray(s.which,[13,27,35,36,37,38,39,40])){var a=o.val();if(a.length>=t.minChars){if(a!=o.last_val){if(o.last_val=a,clearTimeout(o.timer),t.cache){if(a in o.cache)return void e(o.cache[a]);for(var i=1;i<a.length-t.minChars;i++){var c=a.slice(0,a.length-i);if(c in o.cache&&!o.cache[c].length)return void e([])}}o.timer=setTimeout((function(){t.source(a,e)}),t.delay)}}else o.last_val=a,o.sc.hide()}}))}))},n.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}}},{}],2:[function(e,t,o){const n="YYYY-MM-DD",s="HH:mm:ss",a="M/D",i="h:mm[<span>]a[</span>]",c="https://discordapp.com/api/webhooks/350728766177280003/2Wjq-qvXd2eGFCowWCRFvZBf1jNsAygq5Qrj-wubFsdggkUoh2UbTBgCAMCu8TOJfQly",r="https://discordapp.com/api/webhooks/358017660602023939/C2TDOGpMDr8ONklNSqG2oX1vIGCd0Zhh1BoNgU2fVebWQiwBJxMmAFCvVkUJITbRPaA_",l="https://us-central1-sparta-bot.cloudfunctions.net";let u=[];function d(e,t){const o=e.split(":"),n=t.split(":");return 3600*(+n[0]-+o[0])+60*(+n[1]-+o[1])+(+n[2]-+o[2])}function m(e,t){return $.post({url:e,dataType:"json",data:{content:t}}).fail(e=>{alert("Failed to send Discord webhook.\nThis is probably because of Discord's rate limiting.\n\nError: "+e.responseText)})}function f(e){const t=Math.floor(e/3600);let o=Math.floor(e%3600/60);return o<10&&(o="0"+o),t+":"+o}function h(e){let t=e.split(":");return+t[0]>12&&(t[0]-=12),t.join(":")}$((function(){firebase.initializeApp({apiKey:"AIzaSyDws1X1SAcQH392wNw_tccxmLflAMvrNdE",authDomain:"sparta-bot.firebaseapp.com",databaseURL:"https://sparta-bot.firebaseio.com",storageBucket:""}),confetti.alpha=.4;let e="",t="",o=[],p=new Map;function g(e){o.push(e)}function v(e){o.splice($.inArray(e,o),1)}function b(){o.sort();const e=o.map(e=>{return`<li><span class='${p.get(e).includes("board")?"board":"none"}'>${e}</span></li>`}).join("");$("#present-list").html(e),$("#member-count").text(o.length)}function C(){e="",$("#name").val(""),y(),confetti.stop()}function w(t){e=t,y(),firebase.database().ref(`log/${e}`).once("value").then(t=>{let o=t.val(),c={},r={};o&&(c=o.meetings,r=o.subtract),function(t,o,c){const r=moment().format(n);t&&function(e){if(!e)return!1;let t=0;for(;e["start"+t];){if(!e["end"+t])return!0;++t}return!1}(t[r])?($("#sign-in").addClass("disabled"),$("#sign-out").removeClass("disabled")):($("#sign-in").removeClass("disabled"),$("#sign-out").addClass("disabled"));let l=0,u="";if($.each(o,(function(e,t){const o=moment(e,n).format(a);u+="<tr class='subtracted'><td>"+o+"</td><td>ðŸ˜ </td><td>ðŸ˜ </td><td>-"+t+"</td></tr>",l-=d("0:00:00",t+":00")})),$.each(t,(function(e,t){let o=0;for(;t["start"+o];){const c=t["start"+o],m=moment(e,n).format(a),p=moment(c,s).format(i);let g,v;t["end"+o]?(g=t["end"+o],v=moment(g,s).format(i),u+="<tr>"):e===r?(g=moment().format(s),v=moment(g,s).format(i),u+="<tr class='not-logged-out today'>"):(g=c,v="~",u+="<tr class='not-logged-out'>");const b=d(c,g),$=h(f(b));l+=b,u+="<td>"+m+"</td><td>"+p+"</td><td>"+v+"</td><td>"+$+"</td></tr>",++o}})),c===e){let t=144e3;p.get(e).includes("board")?t=288e3:p.get(e).includes("nonmember")&&(t=216e3);const o=t-l;$("#hours-completed").text(f(l)),o>0?$("#hours-left").html(f(o)):($("#hours-left").html("<span class='flashy-done'>0</span>"),confetti.start()),$("#attendance tbody").html(u)}}(c,r,e),$("#change-button-container").show(),$("#member-details").css("visibility","visible").fadeTo(100,1),$("#button-container").fadeIn(100)})}function y(){$("#change-button-container").hide(),$("#member-details").css("visibility","hidden"),$("#button-container").fadeOut(200)}function k(e,t){let o,n;t?(o="in",n=c,g(e)):(o="out",n=r,v(e));const s=encodeURIComponent(e);$.get({url:`${l}/signin?name=${s}&type=${o}`}).fail(e=>{console.error(e)}),b(),C(),m(n,`**${e}** signed ${o} at ${moment().format("h:mm A")}.`)}function D(){$(".modal-background").fadeOut(200)}function x(){$("#date-to-correct").val(moment().format("YYYY-MM-DD")),$("#correction-input").val("")}firebase.database().ref("members").once("value").then(e=>{const t=e.val();u=Object.keys(t).filter(e=>!t[e].groups.split(" ").includes("hidden"));for(const e of u){if(t[e].present){const t=moment().format(n);g(e),firebase.database().ref(`log/${e}/meetings/${t}`).once("value").then(t=>{t.val()||(v(e),firebase.database().ref("members/"+e).update({present:!1}),b())})}t[e].groups?p.set(e,t[e].groups):(p.set(e,[]),console.error(`The member ${e} does not have a groups field`))}b()}),$("#name").autoComplete({minChars:1,delay:50,source:function(e,t){e=e.toLowerCase();let o=u.filter(t=>t.toLowerCase().includes(e));o.sort((t,o)=>(t=t.toLowerCase().indexOf(e))<(o=o.toLowerCase().indexOf(e))?-1:t>o?1:0),t(o)},onSelect:(e,t)=>{w(t)}}),$("#name").on("keydown",t=>{e.length>1&&!(13===t.which||9===t.which||t.which>=16&&t.which<=18||t.which>=37&&t.which<=40)&&C()}),$("#present-list").on("click","li span",(function(){const e=$(this).text();$("#name").val(e),w(e)})),$("#sign-in").click((function(){""!==e&&$("#sign-out").hasClass("disabled")&&k(e,!0)})),$("#sign-out").click((function(){""!==e&&$("#sign-in").hasClass("disabled")&&k(e,!1)})),$("#correction").on("click",(function(){t=e,x(),$("#modal h2 span").text(t.split(" ")[0]),$(".modal-background").css("display","flex")})),$("#submit-correction").click((function(){const e=$("#correction-input").val();if(e){const o=moment($("#date-to-correct").val(),"YYYY-MM-DD").format("YYYY-MM-DD"),n=encodeURIComponent(t),s=encodeURIComponent(o),a=encodeURIComponent(e);$.get({url:`${l}/addcorrection?name=${n}&date=${s}&request=${a}`}).fail(e=>{console.error(e)}),alert(`Your correction "${e}" has been recorded.`),m("https://discordapp.com/api/webhooks/392068478837850114/M_whrmdnD28-gFXHvD976YNDd_URPK-XVVffCI7_pG32H7jIKftWZ8nyz_HkIrMeIhem",`**${t}** submitted correction for ${o}: "${e}" at ${moment().format("h:mm A")}.`),D()}})),$("#cancel-correction").click(D),$(".modal-background").click(D),$("#modal").click((function(e){e.stopPropagation()})),x(),$("#edit").click((function(){alert('Every build meeting that you go to, you should make sure to sign in after entering and sign out before leaving. If you sign in for a meeting and do not sign out, those hours won\'t be recorded. If you ever forget to sign in or out, submit a correction using the "Submit Correction" at the bottom right hand corner and mention the date and times to correct. Please DO NOT sign in or sign out for anyone else.\nAlso, if you type !log in our Discord server, SpartaBot will DM you a time log.')}))}))},{}]},{},[2,1]);</script></head><body><div id="progress"></div><div id="container"><div class="sidebar" id="meeting-details"><h2>Present (<span id="member-count">?</span>)</h2><div id="present-list-container"><ul id="present-list"></ul></div></div><div id="main-container"><h1 id="header">Spartabots Signin</h1><input id="name" type="text" name="name" autofocus spellcheck="false" placeholder="Enter your name"><div id="button-container"><button class="sign-button" id="sign-in">Sign in</button> <button class="sign-button" id="sign-out">Sign out</button></div></div><div class="sidebar" id="member-details"><h2>Attendance</h2><div id="member-details-container"><div id="hours">Hours: <span id="hours-completed">???</span><br>Hours left: <span id="hours-left">???</span></div><div id="attendance-container"><table id="attendance"><thead><tr><th>Date</th><th>Start</th><th>End</th><th>Total</th></tr></thead><tbody></tbody></table></div><div id="change-button-container"><button id="correction">Submit Correction</button> <button id="edit">Help</button></div></div></div></div><div class="modal-background" id="modal-background"><div id="modal"><h2>Correction for <span>Name</span></h2><label for="date-to-correct">Date to correct:</label> <input id="date-to-correct" type="date" min="2019-09-01" max="2019-12-31" value="2019-01-01"> <label for="correction-input">Specific correction:</label> <input id="correction-input" type="text" placeholder="e.g. change start time to 4:30 pm"><div id="correction-button-container"><button id="cancel-correction">Cancel</button> <button id="submit-correction">Submit</button></div></div></div></body></html>